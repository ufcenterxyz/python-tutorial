# Python 推导式（Comprehensions）学习要点与练习

## 学习要点总结

Python 推导式是一种简洁、高效的创建集合（列表、字典、集合）的方法，它们本质上是一行代码的循环结构。

### 列表推导式（List Comprehensions）
- 基本语法：`[表达式 for 变量 in 可迭代对象]`
- 带条件语法：`[表达式 for 变量 in 可迭代对象 if 条件]`
- 可以用于快速创建列表、过滤数据、转换数据类型等
- 嵌套列表推导式可以用于展平多维列表

### 字典推导式（Dictionary Comprehensions）
- 基本语法：`{键表达式: 值表达式 for 变量 in 可迭代对象}`
- 带条件语法：`{键表达式: 值表达式 for 变量 in 可迭代对象 if 条件}`
- 可用于创建字典、交换键值对等操作

### 集合推导式（Set Comprehensions）
- 基本语法：`{表达式 for 变量 in 可迭代对象}`
- 带条件语法：`{表达式 for 变量 in 可迭代对象 if 条件}`
- 自动去除重复元素

### 理解方法
1. 把推导式看作是一种简写的循环结构
2. 先理解普通循环，再转换为推导式形式
3. 从简单到复杂，逐步掌握
4. 注意可读性，有时普通循环比复杂推导式更易理解

## 练习题

### 1. 基础列表推导式
**题目**：创建一个包含1到10的平方的列表。

**解题思路**：使用range函数生成1到10的数字，然后对每个数字求平方。

**验收标准**：
- 使用列表推导式完成
- 结果应为 `[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]`
- 代码应简洁，一行完成

### 2. 带条件的列表推导式
**题目**：从1到20中找出所有能被3整除的数字。

**解题思路**：使用range生成1到20的数字，然后用if条件筛选能被3整除的数字。

**验收标准**：
- 使用带条件的列表推导式
- 结果应为 `[3, 6, 9, 12, 15, 18]`
- 使用模运算（%）判断是否能被3整除

### 3. 字符串处理列表推导式
**题目**：将一个包含多个字符串的列表中的每个字符串转换为大写。

**解题思路**：遍历字符串列表，对每个字符串应用upper()方法。

**验收标准**：
- 使用列表推导式和字符串方法
- 输入 `["hello", "world", "python"]`
- 输出 `["HELLO", "WORLD", "PYTHON"]`

### 4. 嵌套列表推导式
**题目**：将一个二维列表展平为一维列表。

**解题思路**：使用嵌套的for循环，先遍历外层列表，再遍历内层列表。

**验收标准**：
- 使用嵌套列表推导式
- 输入 `[[1, 2], [3, 4], [5, 6]]`
- 输出 `[1, 2, 3, 4, 5, 6]`

### 5. 列表推导式与函数结合
**题目**：将一个字符串列表中的每个元素转换为整数（假设列表中都是数字字符串）。

**解题思路**：对列表中的每个元素应用int()函数。

**验收标准**：
- 使用列表推导式和int()函数
- 输入 `["10", "20", "30", "40"]`
- 输出 `[10, 20, 30, 40]`

### 6. 基础字典推导式
**题目**：创建一个字典，键为1到5的数字，值为这些数字的立方。

**解题思路**：使用range生成1到5的数字，然后计算每个数字的立方作为值。

**验收标准**：
- 使用字典推导式
- 结果应为 `{1: 1, 2: 8, 3: 27, 4: 64, 5: 125}`
- 代码应简洁，一行完成

### 7. 字典键值交换
**题目**：将一个字典的键和值交换。

**解题思路**：遍历原字典的items()，然后交换键值对的位置。

**验收标准**：
- 使用字典推导式
- 输入 `{"a": 1, "b": 2, "c": 3}`
- 输出 `{1: "a", 2: "b", 3: "c"}`
- 确保原字典的值是可哈希的（如字符串、数字等）

### 8. 带条件的字典推导式
**题目**：从一个字典中筛选出值大于10的键值对。

**解题思路**：遍历字典的items()，使用if条件筛选值大于10的项。

**验收标准**：
- 使用带条件的字典推导式
- 输入 `{"a": 5, "b": 15, "c": 10, "d": 20}`
- 输出 `{"b": 15, "d": 20}`

### 9. 基础集合推导式
**题目**：从一个包含重复元素的列表中创建一个集合（自动去重）。

**解题思路**：使用集合推导式遍历列表。

**验收标准**：
- 使用集合推导式
- 输入 `[1, 2, 2, 3, 4, 4, 5]`
- 输出应为包含 `{1, 2, 3, 4, 5}` 的集合
- 验证结果是否为集合类型

### 10. 带条件的集合推导式
**题目**：从1到20中找出所有的偶数，并创建一个集合。

**解题思路**：使用range生成1到20的数字，然后用if条件筛选偶数。

**验收标准**：
- 使用带条件的集合推导式
- 结果应为包含 `{2, 4, 6, 8, 10, 12, 14, 16, 18, 20}` 的集合
- 使用模运算（%）判断是否为偶数

### 11. 列表推导式与字符串操作
**题目**：从一个字符串列表中提取每个字符串的首字母。

**解题思路**：遍历字符串列表，对每个字符串取索引0的字符。

**验收标准**：
- 使用列表推导式
- 输入 `["apple", "banana", "cherry"]`
- 输出 `["a", "b", "c"]`

### 12. 过滤列表元素
**题目**：从一个字符串列表中筛选出长度大于3的字符串。

**解题思路**：遍历字符串列表，使用if条件和len()函数判断字符串长度。

**验收标准**：
- 使用带条件的列表推导式
- 输入 `["hi", "hello", "hey", "howdy", "hi"]`
- 输出 `["hello", "howdy"]`

### 13. 多条件列表推导式
**题目**：从1到20中找出既能被2整除又能被3整除的数字。

**解题思路**：使用range生成1到20的数字，然后用多个if条件筛选。

**验收标准**：
- 使用带多个条件的列表推导式
- 结果应为 `[6, 12, 18]`
- 使用模运算（%）判断是否能被2和3整除

### 14. 嵌套字典推导式
**题目**：有两个列表，一个包含学生姓名，另一个包含对应的分数。创建一个字典，键为姓名，值为及格/不及格（分数>=60为及格）。

**解题思路**：使用zip函数将两个列表配对，然后使用字典推导式创建字典。

**验收标准**：
- 使用zip和字典推导式
- 输入 `names = ["Alice", "Bob", "Charlie"]` 和 `scores = [85, 55, 65]`
- 输出 `{"Alice": "及格", "Bob": "不及格", "Charlie": "及格"}`

### 15. 列表推导式与字符串分割
**题目**：将一个由逗号分隔的字符串转换为整数列表。

**解题思路**：先使用split()方法分割字符串，然后使用列表推导式将每个部分转换为整数。

**验收标准**：
- 使用列表推导式和int()函数
- 输入 `"1,2,3,4,5"`
- 输出 `[1, 2, 3, 4, 5]`

### 16. 创建字典计数器
**题目**：统计一个字符串中每个字符出现的次数。

**解题思路**：遍历字符串中的每个字符，创建一个字典，键为字符，值为该字符在字符串中出现的次数。

**验收标准**：
- 使用字典推导式
- 输入 `"hello"`
- 输出 `{"h": 1, "e": 1, "l": 2, "o": 1}`
- 注意处理重复字符

### 17. 集合操作与推导式
**题目**：从两个列表中找出共同存在的元素。

**解题思路**：使用集合推导式和集合的交集操作。

**验收标准**：
- 使用集合推导式或直接使用集合转换
- 输入 `list1 = [1, 2, 3, 4]` 和 `list2 = [3, 4, 5, 6]`
- 输出应为包含 `{3, 4}` 的集合

### 18. 列表推导式与条件表达式
**题目**：将一个数字列表转换为字符串列表，如果数字是偶数，转换为"even"，否则转换为"odd"。

**解题思路**：使用列表推导式和条件表达式（三元运算符）。

**验收标准**：
- 使用列表推导式和条件表达式
- 输入 `[1, 2, 3, 4, 5]`
- 输出 `["odd", "even", "odd", "even", "odd"]`

### 19. 嵌套列表与推导式
**题目**：创建一个5x5的乘法表（二维列表）。

**解题思路**：使用嵌套列表推导式，外层循环生成行，内层循环生成列。

**验收标准**：
- 使用嵌套列表推导式
- 输出应为一个5x5的二维列表，每个元素是行索引+1和列索引+1的乘积
- 例如：`[[1, 2, 3, 4, 5], [2, 4, 6, 8, 10], ...]`

### 20. 综合应用
**题目**：有一个字符串列表，包含多个句子。创建一个新的列表，包含每个句子中长度大于3的单词的数量。

**解题思路**：
1. 遍历句子列表
2. 对每个句子，使用split()分割成单词
3. 使用列表推导式和len()函数筛选长度大于3的单词
4. 计算筛选后的单词数量

**验收标准**：
- 使用列表推导式和字符串方法
- 输入 `["Hello world", "Python is awesome", "I am learning"]`
- 输出 `[1, 2, 2]`（"Hello"和"world"中有1个长度>3的单词，"Python is awesome"中有2个，"I am learning"中有2个）
- 代码应简洁高效
