# Python 函数基础教程

## 要点总结

### 1. 函数的基本概念
- 函数是一种代码结构，使用 `def` 关键字定义
- 函数可以接受参数，也可以不接受参数
- 所有函数都会返回值，如果没有明确指定返回值，则返回 `None`

### 2. 函数的定义与调用
- 函数定义格式：`def 函数名(参数列表):`
- 函数调用格式：`函数名(参数)`
- 空函数可以使用 `pass` 语句占位

### 3. 参数类型
- 普通参数：必须按顺序提供
- 关键字参数：可以通过名称指定，不需要按顺序
- 默认参数：在定义时可以指定默认值
- 可变参数 `*args`：接收任意数量的位置参数，在函数内部表现为元组
- 关键字可变参数 `**kwargs`：接收任意数量的关键字参数，在函数内部表现为字典

### 4. 变量作用域
- 函数内部定义的变量是局部变量，只在函数内部可见
- 使用 `global` 关键字可以在函数内部引用全局变量
- 应尽量避免使用全局变量，以防止代码难以维护

### 5. 编程建议
- 遵循 DRY 原则（Don't Repeat Yourself）
- 避免重复代码，将重复的代码块抽象为函数
- 避免编写"意大利面条式代码"（spaghetti code）

## 练习题

### 练习 1：创建简单函数
**题目**：创建一个名为 `greet` 的函数，接受一个名字参数，并打印 "Hello, [名字]!"。

**解题思路**：
- 定义一个带有一个参数的函数
- 使用 print 函数输出问候语

**验收标准**：
- 函数定义正确，命名为 `greet`
- 函数接受一个参数
- 调用 `greet("Alice")` 时，输出 "Hello, Alice!"
- 调用 `greet("Bob")` 时，输出 "Hello, Bob!"

### 练习 2：返回值
**题目**：创建一个名为 `square` 的函数，接受一个数字参数，返回该数字的平方。

**解题思路**：
- 定义一个带有一个参数的函数
- 计算参数的平方并返回结果

**验收标准**：
- 函数定义正确，命名为 `square`
- 函数接受一个数字参数
- 函数返回参数的平方值
- `square(4)` 返回 16
- `square(-3)` 返回 9

### 练习 3：默认参数
**题目**：创建一个名为 `power` 的函数，接受两个参数：一个基数和一个指数（默认为2），返回基数的指数次方。

**解题思路**：
- 定义一个带有两个参数的函数，其中第二个参数有默认值
- 计算并返回结果

**验收标准**：
- 函数定义正确，命名为 `power`
- 函数接受两个参数，第二个参数默认值为2
- `power(3)` 返回 9（3的2次方）
- `power(2, 3)` 返回 8（2的3次方）
- `power(5, 1)` 返回 5（5的1次方）

### 练习 4：多参数函数
**题目**：创建一个名为 `calculate` 的函数，接受三个参数：两个数字和一个运算符（字符串：'add', 'subtract', 'multiply', 'divide'），返回相应的计算结果。

**解题思路**：
- 定义一个带有三个参数的函数
- 使用条件语句判断运算符并执行相应的计算
- 返回计算结果

**验收标准**：
- 函数定义正确，命名为 `calculate`
- 函数接受三个参数
- `calculate(10, 5, 'add')` 返回 15
- `calculate(10, 5, 'subtract')` 返回 5
- `calculate(10, 5, 'multiply')` 返回 50
- `calculate(10, 5, 'divide')` 返回 2
- 对于不支持的运算符，返回错误信息或抛出异常

### 练习 5：关键字参数
**题目**：创建一个名为 `create_profile` 的函数，接受 `name`、`age`、`city` 和 `occupation` 四个关键字参数，并返回一个包含这些信息的字典。

**解题思路**：
- 定义一个带有四个参数的函数，所有参数都有默认值
- 创建并返回一个字典，包含所有参数

**验收标准**：
- 函数定义正确，命名为 `create_profile`
- 函数接受四个关键字参数，都有合理的默认值
- `create_profile(name="Alice", age=30, city="New York", occupation="Engineer")` 返回相应的字典
- 可以只提供部分参数，如 `create_profile(name="Bob", occupation="Designer")`

### 练习 6：可变参数
**题目**：创建一个名为 `sum_all` 的函数，使用 `*args` 接受任意数量的数字，并返回它们的总和。

**解题思路**：
- 定义一个使用 `*args` 的函数
- 计算所有参数的总和并返回

**验收标准**：
- 函数定义正确，命名为 `sum_all`
- 函数使用 `*args` 接受任意数量的参数
- `sum_all(1, 2, 3)` 返回 6
- `sum_all(10)` 返回 10
- `sum_all()` 返回 0（没有参数时）
- `sum_all(1, 2, 3, 4, 5)` 返回 15

### 练习 7：可变关键字参数
**题目**：创建一个名为 `print_key_values` 的函数，使用 `**kwargs` 接受任意数量的关键字参数，并打印每个键值对。

**解题思路**：
- 定义一个使用 `**kwargs` 的函数
- 遍历 `kwargs` 字典并打印每个键值对

**验收标准**：
- 函数定义正确，命名为 `print_key_values`
- 函数使用 `**kwargs` 接受任意数量的关键字参数
- 函数打印每个键值对，格式为 "key: value"
- 调用 `print_key_values(name="Alice", age=30)` 时，输出两行：`name: Alice` 和 `age: 30`（顺序不重要）

### 练习 8：函数组合
**题目**：创建两个函数：`celsius_to_fahrenheit` 和 `fahrenheit_to_celsius`，分别实现摄氏度到华氏度的转换和华氏度到摄氏度的转换。然后创建一个 `convert_temperature` 函数，接受温度值、原始单位和目标单位，调用适当的转换函数并返回结果。

**解题思路**：
- 定义两个转换函数，实现各自的转换逻辑
- 定义一个主函数，根据参数调用相应的转换函数

**验收标准**：
- 三个函数定义正确
- `celsius_to_fahrenheit(0)` 返回 32
- `fahrenheit_to_celsius(32)` 返回 0
- `convert_temperature(0, 'C', 'F')` 返回 32（摄氏度转华氏度）
- `convert_temperature(32, 'F', 'C')` 返回 0（华氏度转摄氏度）
- `convert_temperature(100, 'C', 'C')` 返回 100（单位相同时直接返回）
- 对于不支持的单位，返回错误信息或抛出异常

### 练习 9：递归函数
**题目**：创建一个名为 `factorial` 的递归函数，计算给定数字的阶乘。

**解题思路**：
- 定义一个递归函数，处理基本情况（0或1的阶乘为1）
- 对于其他情况，返回 n * factorial(n-1)

**验收标准**：
- 函数定义正确，命名为 `factorial`
- 函数使用递归实现
- `factorial(0)` 返回 1
- `factorial(1)` 返回 1
- `factorial(5)` 返回 120
- `factorial(10)` 返回 3628800

### 练习 10：作用域
**题目**：创建一个函数 `modify_list`，接受一个列表参数，并在函数内部修改该列表（添加一个元素）。然后创建另一个函数 `create_and_modify_list`，在函数内部创建一个列表并尝试修改它，然后返回该列表。

**解题思路**：
- 理解函数参数的传递机制
- 理解可变对象（如列表）在函数中的行为

**验收标准**：
- 两个函数定义正确
- 当创建一个列表并传递给 `modify_list` 函数后，原列表被修改
- `create_and_modify_list` 函数返回一个包含添加元素的列表
- 理解为什么两种情况的行为不同

### 练习 11：函数作为参数
**题目**：创建一个名为 `apply_function` 的函数，接受一个函数和一个数字列表作为参数，将函数应用于列表中的每个元素，并返回结果列表。

**解题思路**：
- 定义一个接受函数和列表的函数
- 使用列表推导式或循环将函数应用于每个元素

**验收标准**：
- 函数定义正确，命名为 `apply_function`
- 函数接受一个函数和一个列表作为参数
- `apply_function(lambda x: x*2, [1, 2, 3])` 返回 [2, 4, 6]
- `apply_function(str, [1, 2, 3])` 返回 ['1', '2', '3']

### 练习 12：嵌套函数
**题目**：创建一个名为 `create_multiplier` 的函数，接受一个数字参数 n，并返回一个新函数，这个新函数接受一个参数 x 并返回 n * x。

**解题思路**：
- 定义一个外部函数，接受参数 n
- 在外部函数内定义一个内部函数，接受参数 x 并返回 n * x
- 外部函数返回内部函数

**验收标准**：
- 函数定义正确，命名为 `create_multiplier`
- 函数返回另一个函数
- `double = create_multiplier(2)` 创建一个将参数乘以2的函数
- `double(5)` 返回 10
- `triple = create_multiplier(3)` 创建一个将参数乘以3的函数
- `triple(5)` 返回 15

### 练习 13：全局变量
**题目**：创建一个全局变量 `counter` 和两个函数：`increment_counter` 和 `get_counter`。`increment_counter` 函数增加计数器的值，`get_counter` 函数返回当前计数器的值。

**解题思路**：
- 定义一个全局变量
- 在函数中使用 `global` 关键字访问全局变量

**验收标准**：
- 全局变量和两个函数定义正确
- `increment_counter()` 调用后，计数器的值增加1
- `get_counter()` 返回当前计数器的值
- 多次调用 `increment_counter()` 后，`get_counter()` 返回正确的累计值

### 练习 14：函数文档字符串
**题目**：创建一个名为 `calculate_area` 的函数，接受形状类型和相应的参数，计算并返回面积。为函数添加适当的文档字符串，描述函数的用途、参数和返回值。

**解题思路**：
- 定义一个函数，处理不同形状的面积计算
- 添加详细的文档字符串

**验收标准**：
- 函数定义正确，命名为 `calculate_area`
- 函数包含详细的文档字符串，描述用途、参数和返回值
- 函数能够计算至少三种形状的面积（如圆形、矩形、三角形）
- `calculate_area('circle', radius=5)` 返回圆的面积
- `calculate_area('rectangle', length=4, width=6)` 返回矩形的面积
- `calculate_area('triangle', base=3, height=8)` 返回三角形的面积
- 使用 `help(calculate_area)` 可以查看函数的文档

### 练习 15：参数验证
**题目**：创建一个名为 `divide` 的函数，接受两个数字参数并返回它们的商。确保函数检查除数是否为零，如果是则返回错误信息。

**解题思路**：
- 定义一个函数，接受两个参数
- 在执行除法前检查除数是否为零

**验收标准**：
- 函数定义正确，命名为 `divide`
- 函数接受两个数字参数
- `divide(10, 2)` 返回 5
- `divide(10, 0)` 返回错误信息或抛出异常
- 函数包含适当的参数验证

### 练习 16：函数返回多个值
**题目**：创建一个名为 `min_max_avg` 的函数，接受一个数字列表，返回列表中的最小值、最大值和平均值。

**解题思路**：
- 定义一个函数，接受一个列表参数
- 计算列表的最小值、最大值和平均值
- 返回这三个值（Python函数可以返回多个值，实际上是返回一个元组）

**验收标准**：
- 函数定义正确，命名为 `min_max_avg`
- 函数接受一个数字列表参数
- `min_max_avg([1, 2, 3, 4, 5])` 返回 (1, 5, 3.0)
- `min_max_avg([10, 10, 10])` 返回 (10, 10, 10.0)
- 对于空列表，函数应返回适当的错误信息或默认值

### 练习 17：函数作为返回值
**题目**：创建一个名为 `create_adder` 的函数，接受一个基数参数，并返回一个新函数，这个新函数接受一个参数并将其与基数相加。

**解题思路**：
- 定义一个外部函数，接受基数参数
- 在外部函数内定义一个内部函数，将参数与基数相加
- 外部函数返回内部函数

**验收标准**：
- 函数定义正确，命名为 `create_adder`
- 函数返回另一个函数
- `add5 = create_adder(5)` 创建一个将参数加5的函数
- `add5(10)` 返回 15
- `add100 = create_adder(100)` 创建一个将参数加100的函数
- `add100(10)` 返回 110

### 练习 18：Lambda 函数
**题目**：使用 lambda 函数创建一个简单的计算器，接受两个数字和一个操作符（+, -, *, /），返回计算结果。

**解题思路**：
- 使用 lambda 函数创建简单的数学运算函数
- 使用字典将操作符映射到相应的 lambda 函数

**验收标准**：
- 创建一个名为 `calculator` 的函数，内部使用 lambda 函数
- 函数接受两个数字和一个操作符
- `calculator(5, 3, '+')` 返回 8
- `calculator(5, 3, '-')` 返回 2
- `calculator(5, 3, '*')` 返回 15
- `calculator(6, 3, '/')` 返回 2
- 对于不支持的操作符，返回错误信息

### 练习 19：函数的异常处理
**题目**：创建一个名为 `safe_divide` 的函数，接受两个参数并返回它们的商。使用 try-except 块处理可能的异常（如除以零）。

**解题思路**：
- 定义一个函数，接受两个参数
- 使用 try-except 块捕获可能的异常
- 返回计算结果或错误信息

**验收标准**：
- 函数定义正确，命名为 `safe_divide`
- 函数使用 try-except 块处理异常
- `safe_divide(10, 2)` 返回 5
- `safe_divide(10, 0)` 返回错误信息而不是抛出异常
- `safe_divide("10", "2")` 尝试将字符串转换为数字，如果成功则返回结果，否则返回错误信息

### 练习 20：函数组合应用
**题目**：创建一个名为 `process_data` 的函数，接受一个数字列表和多个处理函数（使用 `*args`），按顺序将这些函数应用于列表，并返回最终结果。

**解题思路**：
- 定义一个函数，接受一个列表和多个函数参数
- 依次将每个函数应用于列表
- 返回最终处理后的列表

**验收标准**：
- 函数定义正确，命名为 `process_data`
- 函数接受一个列表和任意数量的函数参数
- 创建几个简单的处理函数，如 `double_values`（将所有值乘以2）、`filter_evens`（只保留偶数）等
- `process_data([1, 2, 3, 4], double_values)` 返回 [2, 4, 6, 8]
- `process_data([1, 2, 3, 4], double_values, filter_evens)` 返回 [2, 4, 6, 8] 中的偶数
- 能够处理任意数量的处理函数
